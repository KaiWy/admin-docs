<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Installation &mdash; Effektif administrators guide 2.27.2 documentation</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '2.27.2',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="shortcut icon" href="_static/favicon.ico"/>
    <link rel="top" title="Effektif administrators guide 2.27.2 documentation" href="index.html" />
    <link rel="next" title="Update" href="update.html" />
    <link rel="prev" title="Introduction" href="introduction.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="update.html" title="Update"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="introduction.html" title="Introduction"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">Effektif administrators guide 2.27.2 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="installation">
<h1>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h1>
<p>This section will guide you through the Effektif set-up process. Simply follow the subsections step by step. If you have already installed Effektif and want to update the system to a newer version, you can skip this chapter.</p>
<div class="section" id="system-requirements">
<h2>System requirements<a class="headerlink" href="#system-requirements" title="Permalink to this headline">¶</a></h2>
<div class="section" id="operating-system">
<h3>Operating system<a class="headerlink" href="#operating-system" title="Permalink to this headline">¶</a></h3>
<p>The Effektif system can be deployed on different operating systems. Officially supported are the following operating systems:</p>
<ul class="simple">
<li>Debian Stable Release 64Bit</li>
<li>Microsoft Windows Server 64Bit</li>
</ul>
<p><em>Important: In general, it is possible to install Effektif on other Linux distributions. However, the installation process can differ from the following instructions and the Effektif team cannot offer official support in case of an installation problem.</em></p>
<p>You are advised to use a 64Bit operating system in order to be able to assign more than 1.5GB of heap space to the Java VM. Furthermore, MongoDB is limited to 2GB of content on 32Bit operating systems.</p>
</div>
<div class="section" id="hardware-requirements">
<h3>Hardware requirements<a class="headerlink" href="#hardware-requirements" title="Permalink to this headline">¶</a></h3>
<p>The described installation in this adminstration guide will set up the database and the application server on the same system. However, it is also possible to set up the database and application server on separate systems. For instance, if you have already an infrastructure that provides MongoDB instances for different applications, you can simply reuse your infrastructure and just create another database for Effektif.</p>
<p>The minimal hardware requirements for the combined system of application and database server are:</p>
<ul class="simple">
<li>8 GB RAM</li>
<li>4 core CPU</li>
<li>50 GB disk space</li>
</ul>
<p>The required disk space depends on how you will use Effektif. 50 GB should be sufficient disk space for most scenarios. However, if you plan on using a lot of file uploads in your processes the required disk space depends largely on the number and size of the uploaded files. Be aware, the required disk space does not include the space necessary for backups. If you plan on storing the backups on the same server, you should add more.</p>
</div>
<div class="section" id="other-systems">
<h3>Other systems<a class="headerlink" href="#other-systems" title="Permalink to this headline">¶</a></h3>
<p>The Effektif system relies on a SMTP mail server to send notifications and invite users. You can simply reuse any existing mail server in your organization that supports access via SMTP.</p>
</div>
<div class="section" id="software-requirements">
<h3>Software requirements<a class="headerlink" href="#software-requirements" title="Permalink to this headline">¶</a></h3>
<p>In order to run Effektif on your server, you will need to install some additional software. Depending on your deployment strategy (combined or separate system for application and database), you have to install the following software requirements either on the same server or the respective separate servers.</p>
<p>The following sections contain detailed instructions on how to install and configure the additional software components.</p>
<p>The application server requires the following additional software:</p>
<ul class="simple">
<li>Java: Oracle JSE version 8 (1.8.0_45+) or Oracle JSE version 7 (1.7.0_67+)</li>
<li>Apache Tomcat 7 64 Bit</li>
</ul>
<p>The database server requires the following additional software:</p>
<ul class="simple">
<li>MongoDB version 2.4.x</li>
</ul>
<p><em>Important: MongoDB version 2.6.x or higher is not yet officially supported by Effektif. Please, make sure to install version 2.4.x.</em></p>
</div>
<div class="section" id="web-browser">
<span id="supported-browsers"></span><h3>Web browser<a class="headerlink" href="#web-browser" title="Permalink to this headline">¶</a></h3>
<p>A current web browser is necessary on every client that shall display the Effektif user interface. The following list shows the supported web browsers and versions:</p>
<ul class="simple">
<li>Google Chrome 23 or newer</li>
<li>Mozilla Firefox 10 or newer</li>
<li>Microsoft Internet Explorer 9 or newer</li>
<li>Apple Safari 5 or newer</li>
</ul>
</div>
</div>
<div class="section" id="unpack-effektif">
<h2>Unpack Effektif<a class="headerlink" href="#unpack-effektif" title="Permalink to this headline">¶</a></h2>
<p>Unzip the effektif-{version}.zip to a directory of your choice, e.g. <tt class="docutils literal"><span class="pre">/yourlocation/effektif-{version}</span></tt>
In the rest of this guide, we&#8217;ll refer to the effektif home directory as <tt class="docutils literal"><span class="pre">$EFFEKTIF_HOME</span></tt>.
The directory will contain the following files:</p>
<ul>
<li><p class="first">*.sh - Linux shell scripts</p>
</li>
<li><p class="first">db - directory that contains MongoDB configuration files</p>
<blockquote>
<div><ul class="simple">
<li>mongodb.conf - configuration file for Linux</li>
<li>mongod.cfg - configuration file for Windows</li>
</ul>
</div></blockquote>
</li>
<li><p class="first">effektif - directory</p>
<blockquote>
<div><ul class="simple">
<li>ROOT - this directory contains the web application</li>
</ul>
</div></blockquote>
</li>
</ul>
<p>On Linux systems you need to make the scripts executable with the <tt class="docutils literal"><span class="pre">chmod</span></tt> command like this:</p>
<div class="highlight-python"><div class="highlight"><pre>chmod a+x $EFFEKTIF_HOME/*.sh
</pre></div>
</div>
</div>
<div class="section" id="install-java">
<span id="id1"></span><h2>Install Java<a class="headerlink" href="#install-java" title="Permalink to this headline">¶</a></h2>
<p>The application server requires a Java runtime environment in order to execute the Java backend of Effektif. Therefore, you have to install Java 8 64Bit or Java 7 64Bit on the application server. You can download a respective installation package for your operating system here:</p>
<p><a class="reference external" href="https://www.java.com/en/download/manual.jsp">https://www.java.com/en/download/manual.jsp</a></p>
</div>
<div class="section" id="install-tomcat">
<h2>Install Tomcat<a class="headerlink" href="#install-tomcat" title="Permalink to this headline">¶</a></h2>
<p>The Java backend of the Effektif system is executed using Apache Tomcat 7. Effektif does not support any older or younger versions of Tomcat than version 7. Furthermore, you have to use a 64 Bit version of Apache Tomcat 7.</p>
<p>You can download the latest installation files for different operating systems from the following site:</p>
<p><a class="reference external" href="http://tomcat.apache.org/download-70.cgi">http://tomcat.apache.org/download-70.cgi</a></p>
<p>In general, please make sure the user executing the Tomcat has read / write permissions for the folder <tt class="docutils literal"><span class="pre">$TOMCAT_HOME/webapps</span></tt> and the containing subfolders.</p>
<div class="section" id="windows">
<h3>Windows<a class="headerlink" href="#windows" title="Permalink to this headline">¶</a></h3>
<p>If you are using a Windows system, the download site offers a Windows Service Installer (“32-bit/64-bit Windows Service Installer”). This installer will install the Apache Tomcat as a Windows service which can be started, stopped and configured over a graphical user interface. The service installer is the recommended way for Windows users to install the Tomcat server. Please, make sure you execute the installer with administrator privileges.</p>
<p>Furthermore, it is recommended to install the Apache Tomcat into a root folder on <tt class="docutils literal"><span class="pre">C:\</span></tt>.</p>
</div>
<div class="section" id="debian">
<h3>Debian<a class="headerlink" href="#debian" title="Permalink to this headline">¶</a></h3>
<p>If you are using Linux, consider installing Apache Tomcat using a package manager.
On Debian, you can use the Advanced Packaging Tool (APT) and execute the following command:</p>
<div class="highlight-python"><div class="highlight"><pre>apt-get install tomcat7
</pre></div>
</div>
</div>
</div>
<div class="section" id="configure-tomcat">
<h2>Configure Tomcat<a class="headerlink" href="#configure-tomcat" title="Permalink to this headline">¶</a></h2>
<p>This section will point the configuration options that are required to run Effektif. However, Tomcat offers more configuration options that can be found in the official documentation:</p>
<p><a class="reference external" href="http://tomcat.apache.org/tomcat-7.0-doc/">http://tomcat.apache.org/tomcat-7.0-doc/</a></p>
<div class="section" id="java-options">
<h3>Java options<a class="headerlink" href="#java-options" title="Permalink to this headline">¶</a></h3>
<p>There are some Java options that need to be configured before starting the Tomcat server. These options are configured using the <tt class="docutils literal"><span class="pre">JAVA_OPTS</span></tt> environment variable. It should contain the following values:</p>
<table border="1" class="docutils">
<colgroup>
<col width="29%" />
<col width="71%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">-Xms1536m</span></tt></td>
<td>minimum RAM, should be at least 1.5GB</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">-Xmx2048m</span></tt></td>
<td>maximum RAM, should be at least 2GB but more is recommended</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">-Dfile.encoding=UTF-8</span></tt></td>
<td>sets UTF-8 as Apache Tomcat’s default encoding mechanism</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">-XX:PermSize=128m</span></tt></td>
<td>initial permanent generation space in MB</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">-XX:MaxPermSize=256m</span></tt></td>
<td>maximum permanent generation space in MB</td>
</tr>
</tbody>
</table>
<p>In order to allocate sufficient RAM to the Tomcat server you have to set the options Xms and Xmx followed by the number of MB allocated and a literal ‘m’. <tt class="docutils literal"><span class="pre">Xms</span></tt> defines the initial / minimum amount of RAM that is used and <tt class="docutils literal"><span class="pre">Xmx</span></tt> the allowed maximum. You are advised to allocate at least 2GB of RAM to the Tomcat. However, it is recommended to use more RAM. For example, if you want to assign 4GB of maximum RAM the option would be <tt class="docutils literal"><span class="pre">-Xmx4096m</span></tt>.</p>
<p>The values for the permanent generation space have to be increased as well, these are defined by the values <tt class="docutils literal"><span class="pre">-XX:PermSize=128m</span></tt> and <tt class="docutils literal"><span class="pre">-XX:MaxPermSize=256m</span></tt>.</p>
</div>
<div class="section" id="id2">
<h3>Windows<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<p>If you installed Tomcat using the Windows service installer, you can open the configuration dialog by opening the Windows start menu and selecting <tt class="docutils literal"><span class="pre">Program</span> <span class="pre">Files\Apache</span> <span class="pre">Tomcat\Configure</span> <span class="pre">Tomcat</span></tt>.</p>
<div class="figure align-center">
<a class="reference internal image-reference" href="_images/Configure_Tomcat_Windows_en.png"><img alt="_images/Configure_Tomcat_Windows_en.png" src="_images/Configure_Tomcat_Windows_en.png" /></a>
<p class="caption">The Java tab of the Tomcat configuration dialog</p>
</div>
<p>The tab Java offers the possibility to set the options and define the memory pool (minimum and maximum RAM usage). Fill in the values for Xms and Xmx into the fields for memory pool and add the other options to the text area labeled as Java Options.</p>
</div>
<div class="section" id="id3">
<h3>Debian<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h3>
<p>One way to define the <tt class="docutils literal"><span class="pre">JAVA_OPTS</span></tt> under Debian and other Linux distributions is to create the file <tt class="docutils literal"><span class="pre">setenv.sh</span></tt> in the Tomcat 7 <tt class="docutils literal"><span class="pre">/bin/</span></tt> directory. This directory contains also other files like the <tt class="docutils literal"><span class="pre">catalina.sh</span></tt>, the <tt class="docutils literal"><span class="pre">startup.sh</span></tt> or the <tt class="docutils literal"><span class="pre">shutdown.sh</span></tt> und is for instance located in <tt class="docutils literal"><span class="pre">/usr/share/tomcat7</span></tt> or a similar directory.
Simply create or extend any existing setenv.sh file and add the line for <tt class="docutils literal"><span class="pre">the</span> <span class="pre">JAVA_OPTS</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre>export JAVA_OPTS=&quot;$JAVA_OPTS -Xms1536m [... add the other options]&quot;
</pre></div>
</div>
<p>In case you have created a new <tt class="docutils literal"><span class="pre">setenv.sh</span></tt> file, you have to make sure it is executable using the <tt class="docutils literal"><span class="pre">chmod</span></tt> command:</p>
<div class="highlight-python"><div class="highlight"><pre>chmod a+x setenv.sh
</pre></div>
</div>
</div>
<div class="section" id="set-up-the-tomcat-connector">
<h3>Set up the Tomcat connector<a class="headerlink" href="#set-up-the-tomcat-connector" title="Permalink to this headline">¶</a></h3>
<p>By default the Tomcat server will start up using port 8080 and 8005. Port 8080 is used for serving the Effektif web application. Port 8005 is used to shutdown the Tomcat instance. You can change the port in the server.xml which is located in <tt class="docutils literal"><span class="pre">$TOMCAT_HOME/conf/server.xml</span></tt>.</p>
<p><em>Important: If the server is running on any other port than port 80, your users will have to enter the port in the address line of the web browser, e.g. http://effektif.yourdomain.com:8080/.</em></p>
<p>Locate the HTTP connector and change the value of port to your preferred port.
Furthermore, make sure the connector contains the entry <tt class="docutils literal"><span class="pre">URIEnconding=&quot;UTF-8&quot;</span></tt>.
For example, the connector could look like this:</p>
<div class="highlight-python"><div class="highlight"><pre>&lt;Connector port=&quot;80&quot; protocol=&quot;HTTP/1.1&quot;
    connectionTimeout=&quot;20000&quot;
    redirectPort=&quot;8443&quot;
    URIEncoding=&quot;UTF-8&quot; /&gt;
</pre></div>
</div>
</div>
</div>
<div class="section" id="copy-the-effektif-webapp">
<h2>Copy the Effektif webapp<a class="headerlink" href="#copy-the-effektif-webapp" title="Permalink to this headline">¶</a></h2>
<p>The Effektif webapp which can be found in the directory <tt class="docutils literal"><span class="pre">$EFFEKTIF_HOME/effektif/ROOT</span></tt> needs to be copied to Tomcat’s webapps folder.
Therefore remove any files and folders that are located in <tt class="docutils literal"><span class="pre">$TOMCAT_HOME/webapps</span></tt> and copy the ROOT folder to <tt class="docutils literal"><span class="pre">$TOMCAT_HOME/webapps/</span></tt>.</p>
<p>The Effektif application needs to run as the ROOT application in Tomcat.
Running Effektif in parallel with another application that must run as the ROOT application in the same Tomcat is currently not possible.</p>
</div>
<div class="section" id="install-mongodb">
<h2>Install MongoDB<a class="headerlink" href="#install-mongodb" title="Permalink to this headline">¶</a></h2>
<p>MongoDB is the only database system currently supported by Effektif.
If you already have an infrastructure that can provide a MongoDB version 2.4.x instance,
simply create a new instance for Effektif and skip to the section <a class="reference internal" href="#configure-mongodb"><em>Configure MongoDB</em></a>. Otherwise go on with the installation instructions.</p>
<p>General information about installing MongoDB on different operating systems can be found at:</p>
<p><a class="reference external" href="http://docs.mongodb.org/v2.4/installation/">http://docs.mongodb.org/v2.4/installation/</a></p>
<p>If you are using Linux, you have the possibilities to install MongoDB using either a package manager like apt-get or downloading the binaries directly. It is recommened to use the package manager because it will also set up respective scripts that allow you to start and stop the server easily. However, you have to make sure the correct version is installed. Subsection <a class="reference internal" href="#install-mongodb-debian"><em>Debian</em></a> explains in more details how to set up MongoDB on Debian and might work as an example for other Linux distributions.</p>
<div class="section" id="remarks-for-downloading-the-binaries">
<h3>Remarks for downloading the binaries<a class="headerlink" href="#remarks-for-downloading-the-binaries" title="Permalink to this headline">¶</a></h3>
<p>Effektif does not yet support MongoDB 2.6.x. Therefore, you have to download the latest MongoDB 2.4.x release, which will be listed under previous releases.
You can find the correct version for your operating system here:</p>
<p><a class="reference external" href="http://www.mongodb.org/downloads">http://www.mongodb.org/downloads</a></p>
<p>Please, make sure to download the 64Bit version of MongoDB. The 32Bit version has a limited size of 2GB for stored content and, therefore, cannot be used in productive systems.</p>
</div>
<div class="section" id="id4">
<h3>Windows<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h3>
<p>Windows requires you to download the binaries. Consider the remarks of the last subsection when doing so. If you are using any version older than Windows Server 2008 R2, you have to download the 64Bit legacy release.</p>
<p>You can find more details about installing MongoDB on Windows in the documentation:</p>
<p><a class="reference external" href="http://docs.mongodb.org/v2.4/tutorial/install-mongodb-on-windows/">http://docs.mongodb.org/v2.4/tutorial/install-mongodb-on-windows/</a></p>
<p>When you finished downloading MongoDB follow the next steps:</p>
<ol class="arabic">
<li><p class="first">Extract the content of the downloaded archive into <tt class="docutils literal"><span class="pre">C:\MongoDB</span></tt> or any directory of your choice.</p>
<blockquote>
<div><ul class="simple">
<li>The MongoDB directory should contain directly the extracted bin directory.</li>
<li>Important: The whole path shouldn’t contain any whitespaces. Otherwise the service configuration will not work.</li>
</ul>
</div></blockquote>
</li>
<li><p class="first">Create a data directory for the MongoDB files, e.g. <tt class="docutils literal"><span class="pre">C:\MongoDB\data</span></tt>.</p>
<blockquote>
<div><ul class="simple">
<li>This directory will need the most disk space. Make sure the drive has sufficient disk space.</li>
</ul>
</div></blockquote>
</li>
<li><p class="first">Create a logs directory for the MongoDB log files, e.g. <tt class="docutils literal"><span class="pre">C:\MongoDB\logs</span></tt>.</p>
</li>
<li><p class="first">Copy the file <tt class="docutils literal"><span class="pre">$EFFEKTIF_HOME\db\mongod.cfg</span></tt> to your MongoDB directory <tt class="docutils literal"><span class="pre">C:\MongoDB\mongod.cfg</span></tt> and edit the file.</p>
<blockquote>
<div><ul class="simple">
<li>The dbpath needs to contain the absolute path to the data directory, e.g. <tt class="docutils literal"><span class="pre">C:\MongoDB\data</span></tt>.</li>
<li>The logpath needs to contain the absolute path to the log file, e.g. <tt class="docutils literal"><span class="pre">C:\MongoDB\logs\mongodb.log</span></tt>. The log file will be created once MongoDB is started.</li>
<li>See section <a class="reference internal" href="#configure-mongodb"><em>Configure MongoDB</em></a> for more information about the other configuration values.</li>
</ul>
</div></blockquote>
</li>
<li><p class="first">Open the command line cmd with administrative privileges and execute the following command. Make sure to use absolute paths and replace them with the matching ones on your system.</p>
<blockquote>
<div><ul class="simple">
<li><tt class="docutils literal"><span class="pre">C:\MongoDB\bin\mongod.exe</span> <span class="pre">--config</span> <span class="pre">C:\MongoDB\mongod.cfg</span> <span class="pre">--install</span></tt></li>
<li>The command line should tell you that the service MongoDB was properly created.</li>
<li>You can unregister the service again by executing: <tt class="docutils literal"><span class="pre">C:\MongoDB\bin\mongod.exe</span> <span class="pre">--remove</span></tt></li>
<li>The registered service should start MongoDB automatically on startup of Windows.</li>
</ul>
</div></blockquote>
</li>
<li><p class="first">You can now start MongoDB by executing the following command: <tt class="docutils literal"><span class="pre">net</span> <span class="pre">start</span> <span class="pre">MongoDB</span></tt></p>
<blockquote>
<div><ul class="simple">
<li>If this command fails with the error 1053 or 2186, make sure that the configuration file contains absolute paths. Furthermore, the paths must not have any whitespaces and should not be located in any directory that requires admin privileges.</li>
<li>You can stop MongoDB by calling: <tt class="docutils literal"><span class="pre">net</span> <span class="pre">stop</span> <span class="pre">MongoDB</span></tt></li>
<li>The service is also listed in the services window that can be opened by running <tt class="docutils literal"><span class="pre">services.msc</span></tt>.</li>
</ul>
</div></blockquote>
</li>
</ol>
</div>
<div class="section" id="install-mongodb-debian">
<span id="id5"></span><h3>Debian<a class="headerlink" href="#install-mongodb-debian" title="Permalink to this headline">¶</a></h3>
<p>If you are installing MongoDB on a Debian system, you are advised to use the method described in the MongoDB configuration:</p>
<p><a class="reference external" href="http://docs.mongodb.org/v2.4/tutorial/install-mongodb-on-debian/">http://docs.mongodb.org/v2.4/tutorial/install-mongodb-on-debian/</a></p>
<p>For convenience reasons the script <tt class="docutils literal"><span class="pre">$EFFEKTIF_HOME/mongodb.install.debian.sh</span></tt> already wraps all necessary commands to install the correct version of MongoDB using apt-get. Simply execute it from the command line by opening <tt class="docutils literal"><span class="pre">$EFFEKTIF_HOME</span></tt> and calling:</p>
<div class="highlight-python"><div class="highlight"><pre>sudo ./mongodb.install.debian.sh
</pre></div>
</div>
<p>This will add the MongoDB repositories to your package sources and install the version 2.4.x of MongoDB.
You can now simply start and stop the MongoDB server by calling</p>
<div class="highlight-python"><div class="highlight"><pre>sudo /etc/init.d/mongodb start
</pre></div>
</div>
<p>or</p>
<div class="highlight-python"><div class="highlight"><pre>sudo /etc/init.d/mongodb stop
</pre></div>
</div>
<p>The server will use the default configuration file <tt class="docutils literal"><span class="pre">/etc/mongodb.conf</span></tt>. See the next subsection for more information on how to configure MongoDB for Effektif and create the required user. Be aware, the installation probably started the MongoDB server already. You will need to restart the MongoDB server when you edit the configuration.</p>
</div>
</div>
<div class="section" id="configure-mongodb">
<span id="id6"></span><h2>Configure MongoDB<a class="headerlink" href="#configure-mongodb" title="Permalink to this headline">¶</a></h2>
<p>In order to run MongoDB properly, some configuration options have to be defined. The easiest solution is to create a configuration file and link this configuration file when starting MongoDB with the option <tt class="docutils literal"><span class="pre">--config</span></tt>.</p>
<p>If you installed MongoDB under Windows using the method in the last section, you have already copied the predefined configuration file and adjusted the values for dbpath and logpath to your system. Then your configuration file contains already all necessary values.</p>
<p>If you installed MongoDB under Linux using apt-get, e.g. by following the instructions in the last section, there should be a respective configuration file <tt class="docutils literal"><span class="pre">/etc/mongodb.conf</span></tt>. Edit this configuration file. The properties dbpath and logpath should be defined already. It is recommened to set the properties logpath and auth to true. Furthermore, you will need to add the entry <tt class="docutils literal"><span class="pre">setParameter=textSearchEnabled=true</span></tt>.</p>
<p>In any other case make sure the configuration file contains the following properties.</p>
<table border="1" class="docutils">
<colgroup>
<col width="11%" />
<col width="89%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">dbpath</span></tt></td>
<td>Defines the directory where the database files are stored.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">logpath</span></tt></td>
<td>Defines the file that will contain the logging output.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">logappend</span></tt></td>
<td>Indicates that new logs will be appended to an existing log file after restarting the server, if set to true.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">setParameter</span></tt></td>
<td>set the value to <tt class="docutils literal"><span class="pre">textSearchEnabled=true</span></tt></td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">auth</span></tt></td>
<td>(optional) Turns authentication on, if set to true. It is advised to turn authentication on in case the MongoDB instance can be accessed over the network.</td>
</tr>
</tbody>
</table>
<p>For more configuration options, see <a class="reference external" href="http://docs.mongodb.org/v2.4/reference/configuration-options/">http://docs.mongodb.org/v2.4/reference/configuration-options/</a>.</p>
<div class="section" id="add-a-database-user-for-effektif">
<span id="add-mongodb-user"></span><h3>Add a database user for Effektif<a class="headerlink" href="#add-a-database-user-for-effektif" title="Permalink to this headline">¶</a></h3>
<p>Effektif requires a MongoDB user in the admin database that has the following roles:</p>
<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">dbAdminAnyDatabase</span></tt></td>
<td>&nbsp;</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">readWriteAnyDatabase</span></tt></td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">clusterAdmin</span></tt></td>
<td>This role will allow you to list all databases. This becomes necessary if you plan on using the user credentials when editing any database content with a tool like Robomongo. Furthermore, it is necessary for creating backups.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">userAdminAnyDatabase</span></tt></td>
<td>This role is required for backups.</td>
</tr>
</tbody>
</table>
<p>The user will access the databases for Effektif. Effektif will create two databases, one for the user and workflow data, and one for uploaded files. The name of the first database can be configured in the Effektif configuration file. The name of the second database is derived from the name of the first one by adding “-files”. For instance, if you define the database name “effektif”, the databases “effektif” and “effektif-files” will be created.</p>
<p>In general, if you want to create a new user in MongoDB you will need to authenticate with an existing user that has the role userAdmin or userAdminAnyDatabase. There is an exception for a fresh MongoDB set-up. It will allow you to create the first user from localhost without any authentication. The following examples will show you how to create a new user using the credentials of an admin user and how to do it without any credentials in case of a new MongoDB.</p>
<p>In order to add a new user to MongoDB, the MongoDB server has to be running. The following subsections will show you how to create the Effektif database user using the command line. Alternatively, you can use a GUI application like Robomongo to create the database user. Section <a class="reference internal" href="appendix.html#appendix-add-mongodb-user"><em>How to add the Effektif MongoDB user with Robomongo</em></a> explains how to set up the database user with Robomongo.</p>
<div class="section" id="id7">
<h4>Windows<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h4>
<ol class="arabic">
<li><p class="first">Open the command cmd and go to your MongoDBbin directory, e.g. by executing: <tt class="docutils literal"><span class="pre">cd</span> <span class="pre">C:\MongoDB\bin</span></tt></p>
</li>
<li><p class="first">If you have an admin user, create the Effektif user by executing:</p>
<blockquote>
<div><ul class="simple">
<li><tt class="docutils literal"><span class="pre">mongo.exe</span> <span class="pre">admin</span> <span class="pre">-u</span> <span class="pre">admin</span> <span class="pre">-p</span> <span class="pre">&lt;enterYourAdminPasswordHere&gt;</span> <span class="pre">--eval</span> <span class="pre">&quot;db.addUser(</span> <span class="pre">{</span> <span class="pre">user:</span> <span class="pre">'effektif',</span> <span class="pre">pwd:</span> <span class="pre">'&lt;enterEffektifPasswordHere&gt;',</span> <span class="pre">roles:</span> <span class="pre">['dbAdminAnyDatabase',</span> <span class="pre">'readWriteAnyDatabase',</span> <span class="pre">'clusterAdmin',</span> <span class="pre">'userAdminAnyDatabase']</span> <span class="pre">}</span> <span class="pre">)&quot;</span></tt></li>
<li>Replace &lt;enterAdminPasswordHere&gt; with the password, you have defined for the admin user.</li>
<li>Replace &lt;enterEffektifPasswordHere&gt; with the password for the new Effektif user. As you can see the user name is effektif.</li>
</ul>
</div></blockquote>
</li>
<li><p class="first">If you have a new MongoDB and no admin user, create the Effektif user by executing:</p>
<blockquote>
<div><ul class="simple">
<li><tt class="docutils literal"><span class="pre">mongo.exe</span> <span class="pre">admin</span> <span class="pre">--eval</span> <span class="pre">&quot;db.addUser(</span> <span class="pre">{</span> <span class="pre">user:</span> <span class="pre">'effektif',</span> <span class="pre">pwd:</span> <span class="pre">'&lt;enterEffektifPasswordHere&gt;',</span> <span class="pre">roles:</span> <span class="pre">['dbAdminAnyDatabase',</span> <span class="pre">'readWriteAnyDatabase',</span> <span class="pre">'clusterAdmin',</span> <span class="pre">'userAdminAnyDatabase']</span> <span class="pre">}</span> <span class="pre">)&quot;</span></tt></li>
<li>Replace &lt;enterEffektifPasswordHere&gt; with the password for the new Effektif user. As you can see the user name is effektif.</li>
</ul>
</div></blockquote>
</li>
<li><p class="first">You can verify the creation of the new Effektif user by executing:</p>
<blockquote>
<div><ul class="simple">
<li><tt class="docutils literal"><span class="pre">mongo.exe</span> <span class="pre">admin</span> <span class="pre">-u</span> <span class="pre">effektif</span> <span class="pre">-p</span> <span class="pre">&lt;enterEffektifPasswordHere&gt;</span> <span class="pre">--eval</span> <span class="pre">&quot;db.system.users.find({</span> <span class="pre">user:</span> <span class="pre">'effektif'}).forEach(function(u)</span> <span class="pre">{printjson(u)});&quot;</span></tt></li>
<li>On the command line you will see the user information including the four assigned roles.</li>
</ul>
</div></blockquote>
</li>
</ol>
</div>
<div class="section" id="id8">
<h4>Debian<a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h4>
<p>If you have installed MongoDB using a package manager, the binaries should be available on the path. Otherwise, open the directory with the MongoDB binary files and  follow the instructions.</p>
<ol class="arabic">
<li><p class="first">If you have an admin user, create the Effektif user by executing:</p>
<blockquote>
<div><ul class="simple">
<li><tt class="docutils literal"><span class="pre">mongo</span> <span class="pre">admin</span> <span class="pre">-u</span> <span class="pre">admin</span> <span class="pre">-p</span> <span class="pre">&lt;enterYourAdminPasswordHere&gt;</span> <span class="pre">--eval</span> <span class="pre">&quot;db.addUser(</span> <span class="pre">{</span> <span class="pre">user:</span> <span class="pre">'effektif',</span> <span class="pre">pwd:</span> <span class="pre">'&lt;enterEffektifPasswordHere&gt;',</span> <span class="pre">roles:</span> <span class="pre">['dbAdminAnyDatabase',</span> <span class="pre">'readWriteAnyDatabase',</span> <span class="pre">'clusterAdmin',</span> <span class="pre">'userAdminAnyDatabase']</span> <span class="pre">}</span> <span class="pre">)&quot;</span></tt></li>
<li>Replace &lt;enterAdminPasswordHere&gt; with the password, you have defined for the admin user.</li>
<li>Replace &lt;enterEffektifPasswordHere&gt; with the password for the new Effektif user. As you can see the user name is effektif.</li>
</ul>
</div></blockquote>
</li>
<li><p class="first">If you have a new MongoDB and no admin user, create the Effektif user by executing:</p>
<blockquote>
<div><ul class="simple">
<li><tt class="docutils literal"><span class="pre">mongo</span> <span class="pre">admin</span> <span class="pre">--eval</span> <span class="pre">&quot;db.addUser(</span> <span class="pre">{</span> <span class="pre">user:</span> <span class="pre">'effektif',</span> <span class="pre">pwd:</span> <span class="pre">'&lt;enterEffektifPasswordHere&gt;',</span> <span class="pre">roles:</span> <span class="pre">['dbAdminAnyDatabase',</span> <span class="pre">'readWriteAnyDatabase',</span> <span class="pre">'clusterAdmin',</span> <span class="pre">'userAdminAnyDatabase']</span> <span class="pre">}</span> <span class="pre">)&quot;</span></tt></li>
<li>Replace &lt;enterEffektifPasswordHere&gt; with the password for the new Effektif user. As you can see the user name is effektif.</li>
</ul>
</div></blockquote>
</li>
<li><p class="first">You can verify the creation of the new Effektif user by executing:</p>
<blockquote>
<div><ul class="simple">
<li><tt class="docutils literal"><span class="pre">mongo</span> <span class="pre">admin</span> <span class="pre">-u</span> <span class="pre">effektif</span> <span class="pre">-p</span> <span class="pre">&lt;enterEffektifPasswordHere&gt;</span> <span class="pre">--eval</span> <span class="pre">&quot;db.system.users.find({</span> <span class="pre">user:</span> <span class="pre">'effektif'}).forEach(function(u)</span> <span class="pre">{printjson(u)});&quot;</span></tt></li>
<li>On the command line you will see the user information including the four assigned roles.</li>
</ul>
</div></blockquote>
</li>
</ol>
<p>Once the Effektif user is created, its credentials have to be added to the Effektif configuration file to the properties <tt class="docutils literal"><span class="pre">effektif.mongodb.username</span></tt> and <tt class="docutils literal"><span class="pre">effektif.mongodb.password</span></tt>. Section <a class="reference internal" href="#update-effektif-configuration"><em>Update the Effektif configuration file</em></a> explains how to update the configuration file.</p>
</div>
</div>
<div class="section" id="backup-and-restore">
<h3>Backup and restore<a class="headerlink" href="#backup-and-restore" title="Permalink to this headline">¶</a></h3>
<p>You are advised to do regular backups of the MongoDB database to prevent a complete data loss in case of system failure. The Effektif system will NOT backup the user data on its own.
The <a class="reference internal" href="backup.html#backup"><em>Backup</em></a> section explains in detail how to set up MongoDB backups properly.
The <a class="reference internal" href="restore.html#restore"><em>Restore</em></a> section explains how you can restore an older version of the user data from a backup.</p>
</div>
</div>
<div class="section" id="configuring-effektif">
<span id="configure-effektif"></span><h2>Configuring Effektif<a class="headerlink" href="#configuring-effektif" title="Permalink to this headline">¶</a></h2>
<div class="section" id="install-the-license-file">
<span id="install-license"></span><h3>Install the license file<a class="headerlink" href="#install-the-license-file" title="Permalink to this headline">¶</a></h3>
<p>Along with the Effektif application you have received the Effektif license file, <cite>license.xml</cite>.
Before you can start the Effektif system, you have to add the license file to the application. Therefore, copy the license file into the directory <tt class="docutils literal"><span class="pre">$TOMCAT_HOME/webapps/ROOT/WEB-INF/classes</span></tt>. The Effektif system will check your license file on startup and set up the defined number of licenses.</p>
</div>
<div class="section" id="update-the-effektif-configuration-file">
<span id="update-effektif-configuration"></span><h3>Update the Effektif configuration file<a class="headerlink" href="#update-the-effektif-configuration-file" title="Permalink to this headline">¶</a></h3>
<p>Before you can start Effektif for the first time, you need to configure some mandatory properties in the Effektif configuration file. Make sure you have copied the Effektif web application to the Tomcat’s webapps directory before continuing. The configuration file can be found here <tt class="docutils literal"><span class="pre">$TOMCAT_HOME/webapps/ROOT/WEB-INF/classes/effektif-onpremise.properties</span></tt>.</p>
<p>The configuration file is a property file that contains one configuration option per line and key and value are separated by a <tt class="docutils literal"><span class="pre">=</span></tt>.
Every line that starts with a <tt class="docutils literal"><span class="pre">#</span></tt> is commented out and will not be used.</p>
<p>In general, the configuration allows to configure the base URL of the Effektif system, the mail server, the database connection and integrations with third party systems (e.g. Signavio).</p>
<table border="1" class="docutils">
<colgroup>
<col width="11%" />
<col width="89%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">effektif.baseUrl</span></tt></td>
<td>(Required) The IP address or server name (including the port) of the server running the Effektif Tomcat application server. E.g. <a class="reference external" href="http://effektif.yourdomain.com:8080">http://effektif.yourdomain.com:8080</a>. If the server is running on port 80, the port can be omitted.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">effektif.smtp.host</span></tt></td>
<td>(Required) The IP address or server name of the outgoing email server.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">effektif.smtp.port</span></tt></td>
<td>The port on which the outgoing SMTP server listens</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">effektif.smtp.ssl</span></tt></td>
<td>If SSL should be used ( true or false )</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">effektif.smtp.tls</span></tt></td>
<td>If TLS should be used ( true or false )</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">effektif.smtp.user</span></tt></td>
<td>The username for authentication</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">effektif.smtp.password</span></tt></td>
<td>The password for authentication</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">effektif.mail.from</span></tt></td>
<td>This email address is used as the sender when the Effektif system sends out notifications.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">effektif.mongodb.servers</span></tt></td>
<td>A comma-separated list of MongoDB servers (hostnames). If you have MongodDB running on the same server as Tomcat, the default value of localhost is okay.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">effektif.mongodb.username</span></tt></td>
<td>The Effektif MongoDB user name. If you created the user following the instructions in this guide, the name is <tt class="docutils literal"><span class="pre">effektif</span></tt>.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">effektif.mongodb.password</span></tt></td>
<td>The password of the Effektif MongoDB user. This is the password you defined during user creation.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">effektif.mongodb.database</span></tt></td>
<td>The name of the database Effektif should use. The default value <tt class="docutils literal"><span class="pre">effektif</span></tt> is okay.</td>
</tr>
</tbody>
</table>
<p>The following properties are only relevant if your Effektif installation is connected to your Signavio installation.</p>
<div class="highlight-python"><div class="highlight"><pre>effektif.com.effektif.model.service.signavio.SignavioAuthenticationProvider.
    serviceBaseUrl
effektif.com.effektif.model.service.signavio.SignavioAuthenticationProvider.
    clientId
effektif.com.effektif.model.service.signavio.SignavioAuthenticationProvider.
    clientSecret
</pre></div>
</div>
<p>See section <a class="reference internal" href="signavio.html#signavio-integration"><em>Signavio integration</em></a> for more information on how to set up the integration.</p>
</div>
<div class="section" id="configure-logging">
<h3>Configure logging<a class="headerlink" href="#configure-logging" title="Permalink to this headline">¶</a></h3>
<p>The Effektif system has its own application log file <tt class="docutils literal"><span class="pre">effektif.log</span></tt>. You need to define the directory where this log file is stored. The directory is specified in the file <tt class="docutils literal"><span class="pre">$TOMCAT_HOME/webapps/ROOT/WEB-INF/classes/logback.xml</span></tt>. Open the file and update the following line:</p>
<div class="highlight-python"><div class="highlight"><pre>&lt;property name=&quot;LOG_DIR&quot; value=&quot;./log&quot;/&gt;
</pre></div>
</div>
<p>The value should contain an absolute path. Make sure the user executing Tomcat has the required read / write permissions for the directory.</p>
<p>On Windows it necessary to escape all &#8220;\&#8221;. An example value could like this: <tt class="docutils literal"><span class="pre">&quot;C:\\Logs\\Effektif&quot;</span></tt>.</p>
<p>This configuration file also enables you to change the log level in this file. By default, the log level is INFO. However, in a scenario where you require official support, you will be asked to set the log level to DEBUG. In order to so, update the following:</p>
<div class="highlight-python"><div class="highlight"><pre>&lt;root level=&quot;INFO&quot;&gt;
</pre></div>
</div>
<p>Change it to:</p>
<div class="highlight-python"><div class="highlight"><pre>&lt;root level=&quot;DEBUG&quot;&gt;
</pre></div>
</div>
<p>You will need to restart the Tomcat server for the changes to take effect. You can find more detailed information on how to start the Tomcat server in the next section.</p>
<p>The log file is configured to do a roll over. Every day, a new log file is created which contains a timestamp in the filename similar to <tt class="docutils literal"><span class="pre">effektif-2014-10-09.log</span></tt>. The most recent log entries can still be found in the file effektif.log. After 30 days, the log files will be removed automatically.</p>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Installation</a><ul>
<li><a class="reference internal" href="#system-requirements">System requirements</a><ul>
<li><a class="reference internal" href="#operating-system">Operating system</a></li>
<li><a class="reference internal" href="#hardware-requirements">Hardware requirements</a></li>
<li><a class="reference internal" href="#other-systems">Other systems</a></li>
<li><a class="reference internal" href="#software-requirements">Software requirements</a></li>
<li><a class="reference internal" href="#web-browser">Web browser</a></li>
</ul>
</li>
<li><a class="reference internal" href="#unpack-effektif">Unpack Effektif</a></li>
<li><a class="reference internal" href="#install-java">Install Java</a></li>
<li><a class="reference internal" href="#install-tomcat">Install Tomcat</a><ul>
<li><a class="reference internal" href="#windows">Windows</a></li>
<li><a class="reference internal" href="#debian">Debian</a></li>
</ul>
</li>
<li><a class="reference internal" href="#configure-tomcat">Configure Tomcat</a><ul>
<li><a class="reference internal" href="#java-options">Java options</a></li>
<li><a class="reference internal" href="#id2">Windows</a></li>
<li><a class="reference internal" href="#id3">Debian</a></li>
<li><a class="reference internal" href="#set-up-the-tomcat-connector">Set up the Tomcat connector</a></li>
</ul>
</li>
<li><a class="reference internal" href="#copy-the-effektif-webapp">Copy the Effektif webapp</a></li>
<li><a class="reference internal" href="#install-mongodb">Install MongoDB</a><ul>
<li><a class="reference internal" href="#remarks-for-downloading-the-binaries">Remarks for downloading the binaries</a></li>
<li><a class="reference internal" href="#id4">Windows</a></li>
<li><a class="reference internal" href="#install-mongodb-debian">Debian</a></li>
</ul>
</li>
<li><a class="reference internal" href="#configure-mongodb">Configure MongoDB</a><ul>
<li><a class="reference internal" href="#add-a-database-user-for-effektif">Add a database user for Effektif</a><ul>
<li><a class="reference internal" href="#id7">Windows</a></li>
<li><a class="reference internal" href="#id8">Debian</a></li>
</ul>
</li>
<li><a class="reference internal" href="#backup-and-restore">Backup and restore</a></li>
</ul>
</li>
<li><a class="reference internal" href="#configuring-effektif">Configuring Effektif</a><ul>
<li><a class="reference internal" href="#install-the-license-file">Install the license file</a></li>
<li><a class="reference internal" href="#update-the-effektif-configuration-file">Update the Effektif configuration file</a></li>
<li><a class="reference internal" href="#configure-logging">Configure logging</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="introduction.html"
                        title="previous chapter">Introduction</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="update.html"
                        title="next chapter">Update</a></p>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="update.html" title="Update"
             >next</a> |</li>
        <li class="right" >
          <a href="introduction.html" title="Introduction"
             >previous</a> |</li>
        <li><a href="index.html">Effektif administrators guide 2.27.2 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2015, Christian Wiggert.
    </div>
  </body>
</html>